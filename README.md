# iptv
# IPTV 流媒体检测工具

这是一个用于检测 IPTV 流媒体可用性的工具，支持检测 IPv4 和 IPv6 地址，并提供详细的检测报告。

## 功能特点

1. 支持多种输入方式：
   - 直接输入 M3U 文件 URL
   - 本地 M3U 文件路径
   - 默认本地文件

2. 智能检测：
   - 自动识别 IPv4/IPv6 地址
   - 支持多种流媒体格式检测
   - 自动识别流媒体内容类型

3. 多线程并发检测：
   - 使用 20 个并发线程
   - 实时显示检测进度
   - 显示可用/不可用统计

4. 分类结果输出：
   - 生成总体检测报告
   - 分别保存 IPv4/IPv6 结果
   - 自动统计各类数量

## 安装说明

1. 安装依赖：
```
sudo ./iptv.sh
```
3. 确保脚本具有执行权限：
```
chmod +x iptv.sh
chmod +x check_m3u.py
```
## 使用方法
1. 运行检测：
```
sudo ./iptv.sh
```

2. 选择检测模式：
   - 1: 输入 M3U 文件 URL
   - 2: 输入本地 M3U 文件路径
   - 3: 使用默认本地文件
   - 4: 检测全部节点可用性
   - 5: 退出程序

3. 检测结果：
   在 `m3u_check_result` 目录下生成以下文件：
   - `全部_可用_xxx个.m3u`: 所有可用的频道
   - `全部_不可用_xxx个.m3u`: 所有不可用的频道
   - `IPv4_可用_xxx个.m3u`: IPv4 可用频道
   - `IPv4_不可用_xxx个.m3u`: IPv4 不可用频道
   - `IPv6_可用_xxx个.m3u`: IPv6 可用频道
   - `IPv6_不可用_xxx个.m3u`: IPv6 不可用频道

## 检测标准

工具通过以下方式判断流的可用性：

1. HTTP 状态检查：
   - 检查状态码（200/206）
   - 验证重定向
   - 检测超时情况

2. 内容验证：
   - 检查流媒体格式特征
   - 验证内容类型
   - 读取数据块测试

## 注意事项

1. 需要 root 权限运行
2. 确保网络环境稳定
3. 检测结果会覆盖之前的结果
4. 检测时间取决于频道数量和网络状况

## 常见问题

1. 如果遇到权限问题：
   ```bash
   sudo chmod +x iptv.sh check_m3u.py
   ```

2. 如果无法访问某些地址：
   - 检查网络连接
   - 确认 DNS 设置
   - 检查防火墙设置

3. 如果检测速度较慢：
   - 可能是网络问题
   - 频道数量过多
   - 部分频道响应慢

## 更新日志

- 支持 IPv4/IPv6 分类检测
- 添加总体汇总报告
- 优化检测算法
- 改进错误处理
- 添加进度显示

